/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2013 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
!function(){define("Core/defined",[],function(){"use strict";var e=function(e){return void 0!==e};return e}),define("Core/freezeObject",["./defined"],function(e){"use strict";var t=Object.freeze;return e(t)||(t=function(e){return e}),t}),define("Core/defaultValue",["./freezeObject"],function(e){"use strict";var t=function(e,t){return void 0!==e?e:t};return t.EMPTY_OBJECT=e({}),t}),define("Core/DeveloperError",["./defined"],function(e){"use strict";var t=function(e){this.name="DeveloperError",this.message=e,this.error=new Error,this.stack=this.error.stack};return t.prototype.toString=function(){var t=this.name+": "+this.message;return t+=e(this.stack)?"\n"+this.stack.toString():"\n"+this.error.toString()},t}),define("Core/Cartesian3",["./defaultValue","./defined","./DeveloperError","./freezeObject"],function(e,t,r,n){"use strict";var i=function(t,r,n){this.x=e(t,0),this.y=e(r,0),this.z=e(n,0)};i.fromSpherical=function(n,o){if(!t(n))throw new r("spherical is required");t(o)||(o=new i);var a=n.clock,u=n.cone,s=e(n.magnitude,1),h=s*Math.sin(u);return o.x=h*Math.cos(a),o.y=h*Math.sin(a),o.z=s*Math.cos(u),o},i.fromArray=function(n,o,a){if(!t(n))throw new r("values is required.");if(o+3>n.length)throw new r("offset + 3 is greater than the length of the array.");return o=e(o,0),t(a)||(a=new i),a.x=n[o+0],a.y=n[o+1],a.z=n[o+2],a},i.fromElements=function(e,r,n,o){return t(o)?(o.x=e,o.y=r,o.z=n,o):new i(e,r,n)},i.clone=function(e,r){return t(e)?t(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r):new i(e.x,e.y,e.z):void 0},i.fromCartesian4=i.clone,i.getMaximumComponent=function(e){if(!t(e))throw new r("cartesian is required");return Math.max(e.x,e.y,e.z)},i.getMinimumComponent=function(e){if(!t(e))throw new r("cartesian is required");return Math.min(e.x,e.y,e.z)},i.magnitudeSquared=function(e){if(!t(e))throw new r("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var o=new i;i.distance=function(e,n){if(!t(e)||!t(n))throw new r("left and right are required.");return i.subtract(e,n,o),i.magnitude(o)},i.normalize=function(e,n){if(!t(e))throw new r("cartesian is required");var o=i.magnitude(e);return t(n)?(n.x=e.x/o,n.y=e.y/o,n.z=e.z/o,n):new i(e.x/o,e.y/o,e.z/o)},i.dot=function(e,n){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return e.x*n.x+e.y*n.y+e.z*n.z},i.multiplyComponents=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x*n.x,o.y=e.y*n.y,o.z=e.z*n.z,o):new i(e.x*n.x,e.y*n.y,e.z*n.z)},i.add=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x+n.x,o.y=e.y+n.y,o.z=e.z+n.z,o):new i(e.x+n.x,e.y+n.y,e.z+n.z)},i.subtract=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x-n.x,o.y=e.y-n.y,o.z=e.z-n.z,o):new i(e.x-n.x,e.y-n.y,e.z-n.z)},i.multiplyByScalar=function(e,n,o){if(!t(e))throw new r("cartesian is required");if("number"!=typeof n)throw new r("scalar is required and must be a number.");return t(o)?(o.x=e.x*n,o.y=e.y*n,o.z=e.z*n,o):new i(e.x*n,e.y*n,e.z*n)},i.divideByScalar=function(e,n,o){if(!t(e))throw new r("cartesian is required");if("number"!=typeof n)throw new r("scalar is required and must be a number.");return t(o)?(o.x=e.x/n,o.y=e.y/n,o.z=e.z/n,o):new i(e.x/n,e.y/n,e.z/n)},i.negate=function(e,n){if(!t(e))throw new r("cartesian is required");return t(n)?(n.x=-e.x,n.y=-e.y,n.z=-e.z,n):new i(-e.x,-e.y,-e.z)},i.abs=function(e,n){if(!t(e))throw new r("cartesian is required");return t(n)?(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n):new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z))};var a=new i;i.lerp=function(e,n,o,u){if(!t(e))throw new r("start is required.");if(!t(n))throw new r("end is required.");if("number"!=typeof o)throw new r("t is required and must be a number.");return i.multiplyByScalar(n,o,a),u=i.multiplyByScalar(e,1-o,u),i.add(a,u,u)};var u=new i,s=new i;i.angleBetween=function(e,n){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");i.normalize(e,u),i.normalize(n,s);var o=i.dot(u,s),a=i.cross(u,s,u).magnitude();return Math.atan2(a,o)};var h=new i;return i.mostOrthogonalAxis=function(e,n){if(!t(e))throw new r("cartesian is required.");var o=i.normalize(e,h);return i.abs(o,o),n=o.x<=o.y?o.x<=o.z?i.clone(i.UNIT_X,n):i.clone(i.UNIT_Z,n):o.y<=o.z?i.clone(i.UNIT_Y,n):i.clone(i.UNIT_Z,n)},i.equals=function(e,r){return e===r||t(e)&&t(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z},i.equalsEpsilon=function(e,n,i){if("number"!=typeof i)throw new r("epsilon is required and must be a number.");return e===n||t(e)&&t(n)&&Math.abs(e.x-n.x)<=i&&Math.abs(e.y-n.y)<=i&&Math.abs(e.z-n.z)<=i},i.cross=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");var a=e.x,u=e.y,s=e.z,h=n.x,c=n.y,f=n.z,d=u*f-s*c,l=s*h-a*f,w=a*c-u*h;return t(o)?(o.x=d,o.y=l,o.z=w,o):new i(d,l,w)},i.ZERO=n(new i(0,0,0)),i.UNIT_X=n(new i(1,0,0)),i.UNIT_Y=n(new i(0,1,0)),i.UNIT_Z=n(new i(0,0,1)),i.prototype.getMaximumComponent=function(){return i.getMaximumComponent(this)},i.prototype.getMinimumComponent=function(){return i.getMinimumComponent(this)},i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.magnitudeSquared=function(){return i.magnitudeSquared(this)},i.prototype.magnitude=function(){return i.magnitude(this)},i.prototype.normalize=function(e){return i.normalize(this,e)},i.prototype.dot=function(e){return i.dot(this,e)},i.prototype.multiplyComponents=function(e,t){return i.multiplyComponents(this,e,t)},i.prototype.add=function(e,t){return i.add(this,e,t)},i.prototype.subtract=function(e,t){return i.subtract(this,e,t)},i.prototype.multiplyByScalar=function(e,t){return i.multiplyByScalar(this,e,t)},i.prototype.divideByScalar=function(e,t){return i.divideByScalar(this,e,t)},i.prototype.negate=function(e){return i.negate(this,e)},i.prototype.abs=function(e){return i.abs(this,e)},i.prototype.lerp=function(e,t,r){return i.lerp(this,e,t,r)},i.prototype.angleBetween=function(e){return i.angleBetween(this,e)},i.prototype.mostOrthogonalAxis=function(e){return i.mostOrthogonalAxis(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},i.prototype.cross=function(e,t){return i.cross(this,e,t)},i}),define("Core/Cartesian4",["./defaultValue","./defined","./DeveloperError","./freezeObject"],function(e,t,r,n){"use strict";var i=function(t,r,n,i){this.x=e(t,0),this.y=e(r,0),this.z=e(n,0),this.w=e(i,0)};i.fromArray=function(n,o,a){if(!t(n))throw new r("values is required.");if(o+4>n.length)throw new r("offset + 4 is greater than the length of the array.");return o=e(o,0),t(a)||(a=new i),a.x=n[o+0],a.y=n[o+1],a.z=n[o+2],a.w=n[o+3],a},i.fromElements=function(e,r,n,o,a){return t(a)?(a.x=e,a.y=r,a.z=n,a.w=o,a):new i(e,r,n,o)},i.clone=function(e,r){return t(e)?t(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new i(e.x,e.y,e.z,e.w):void 0},i.getMaximumComponent=function(e){if(!t(e))throw new r("cartesian is required");return Math.max(e.x,e.y,e.z,e.w)},i.getMinimumComponent=function(e){if(!t(e))throw new r("cartesian is required");return Math.min(e.x,e.y,e.z,e.w)},i.magnitudeSquared=function(e){if(!t(e))throw new r("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var o=new i;i.distance=function(e,n){if(!t(e)||!t(n))throw new r("left and right are required.");return i.subtract(e,n,o),i.magnitude(o)},i.normalize=function(e,n){if(!t(e))throw new r("cartesian is required");var o=i.magnitude(e);return t(n)?(n.x=e.x/o,n.y=e.y/o,n.z=e.z/o,n.w=e.w/o,n):new i(e.x/o,e.y/o,e.z/o,e.w/o)},i.dot=function(e,n){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w},i.multiplyComponents=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x*n.x,o.y=e.y*n.y,o.z=e.z*n.z,o.w=e.w*n.w,o):new i(e.x*n.x,e.y*n.y,e.z*n.z,e.w*n.w)},i.add=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x+n.x,o.y=e.y+n.y,o.z=e.z+n.z,o.w=e.w+n.w,o):new i(e.x+n.x,e.y+n.y,e.z+n.z,e.w+n.w)},i.subtract=function(e,n,o){if(!t(e))throw new r("left is required");if(!t(n))throw new r("right is required");return t(o)?(o.x=e.x-n.x,o.y=e.y-n.y,o.z=e.z-n.z,o.w=e.w-n.w,o):new i(e.x-n.x,e.y-n.y,e.z-n.z,e.w-n.w)},i.multiplyByScalar=function(e,n,o){if(!t(e))throw new r("cartesian is required");if("number"!=typeof n)throw new r("scalar is required and must be a number.");return t(o)?(o.x=e.x*n,o.y=e.y*n,o.z=e.z*n,o.w=e.w*n,o):new i(e.x*n,e.y*n,e.z*n,e.w*n)},i.divideByScalar=function(e,n,o){if(!t(e))throw new r("cartesian is required");if("number"!=typeof n)throw new r("scalar is required and must be a number.");return t(o)?(o.x=e.x/n,o.y=e.y/n,o.z=e.z/n,o.w=e.w/n,o):new i(e.x/n,e.y/n,e.z/n,e.w/n)},i.negate=function(e,n){if(!t(e))throw new r("cartesian is required");return t(n)?(n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-e.w,n):new i(-e.x,-e.y,-e.z,-e.w)},i.abs=function(e,n){if(!t(e))throw new r("cartesian is required");return t(n)?(n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n.w=Math.abs(e.w),n):new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z),Math.abs(e.w))};var a=new i;i.lerp=function(e,n,o,u){if(!t(e))throw new r("start is required.");if(!t(n))throw new r("end is required.");if("number"!=typeof o)throw new r("t is required and must be a number.");return i.multiplyByScalar(n,o,a),u=i.multiplyByScalar(e,1-o,u),i.add(a,u,u)};var u=new i;return i.mostOrthogonalAxis=function(e,n){if(!t(e))throw new r("cartesian is required.");var o=i.normalize(e,u);return i.abs(o,o),n=o.x<=o.y?o.x<=o.z?o.x<=o.w?i.clone(i.UNIT_X,n):i.clone(i.UNIT_W,n):o.z<=o.w?i.clone(i.UNIT_Z,n):i.clone(i.UNIT_W,n):o.y<=o.z?o.y<=o.w?i.clone(i.UNIT_Y,n):i.clone(i.UNIT_W,n):o.z<=o.w?i.clone(i.UNIT_Z,n):i.clone(i.UNIT_W,n)},i.equals=function(e,r){return e===r||t(e)&&t(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},i.equalsEpsilon=function(e,n,i){if("number"!=typeof i)throw new r("epsilon is required and must be a number.");return e===n||t(e)&&t(n)&&Math.abs(e.x-n.x)<=i&&Math.abs(e.y-n.y)<=i&&Math.abs(e.z-n.z)<=i&&Math.abs(e.w-n.w)<=i},i.ZERO=n(new i(0,0,0,0)),i.UNIT_X=n(new i(1,0,0,0)),i.UNIT_Y=n(new i(0,1,0,0)),i.UNIT_Z=n(new i(0,0,1,0)),i.UNIT_W=n(new i(0,0,0,1)),i.prototype.getMaximumComponent=function(){return i.getMaximumComponent(this)},i.prototype.getMinimumComponent=function(){return i.getMinimumComponent(this)},i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.magnitudeSquared=function(){return i.magnitudeSquared(this)},i.prototype.magnitude=function(){return i.magnitude(this)},i.prototype.normalize=function(e){return i.normalize(this,e)},i.prototype.dot=function(e){return i.dot(this,e)},i.prototype.multiplyComponents=function(e,t){return i.multiplyComponents(this,e,t)},i.prototype.add=function(e,t){return i.add(this,e,t)},i.prototype.subtract=function(e,t){return i.subtract(this,e,t)},i.prototype.multiplyByScalar=function(e,t){return i.multiplyByScalar(this,e,t)},i.prototype.divideByScalar=function(e,t){return i.divideByScalar(this,e,t)},i.prototype.negate=function(e){return i.negate(this,e)},i.prototype.abs=function(e){return i.abs(this,e)},i.prototype.lerp=function(e,t,r){return i.lerp(this,e,t,r)},i.prototype.mostOrthogonalAxis=function(e){return i.mostOrthogonalAxis(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},i}),define("Core/Math",["./defaultValue","./DeveloperError"],function(e,t){"use strict";var r={};r.EPSILON1=.1,r.EPSILON2=.01,r.EPSILON3=.001,r.EPSILON4=1e-4,r.EPSILON5=1e-5,r.EPSILON6=1e-6,r.EPSILON7=1e-7,r.EPSILON8=1e-8,r.EPSILON9=1e-9,r.EPSILON10=1e-10,r.EPSILON11=1e-11,r.EPSILON12=1e-12,r.EPSILON13=1e-13,r.EPSILON14=1e-14,r.EPSILON15=1e-15,r.EPSILON16=1e-16,r.EPSILON17=1e-17,r.EPSILON18=1e-18,r.EPSILON19=1e-19,r.EPSILON20=1e-20,r.GRAVITATIONALPARAMETER=3986004418e5,r.SOLAR_RADIUS=6995e5,r.SIXTY_FOUR_KILOBYTES=65536,r.sign=function(e){return e>0?1:0>e?-1:0},r.sinh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t-r)},r.cosh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t+r)},r.lerp=function(e,t,r){return(1-r)*e+r*t},r.PI=Math.PI,r.ONE_OVER_PI=1/Math.PI,r.PI_OVER_TWO=.5*Math.PI,r.PI_OVER_THREE=Math.PI/3,r.PI_OVER_FOUR=Math.PI/4,r.PI_OVER_SIX=Math.PI/6,r.THREE_PI_OVER_TWO=.5*3*Math.PI,r.TWO_PI=2*Math.PI,r.ONE_OVER_TWO_PI=1/(2*Math.PI),r.RADIANS_PER_DEGREE=Math.PI/180,r.DEGREES_PER_RADIAN=180/Math.PI,r.RADIANS_PER_ARCSECOND=r.RADIANS_PER_DEGREE/3600,r.toRadians=function(e){return e*r.RADIANS_PER_DEGREE},r.toDegrees=function(e){return e*r.DEGREES_PER_RADIAN},r.convertLongitudeRange=function(e){var t=r.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n},r.negativePiToPi=function(e){for(var t=r.EPSILON10,n=r.PI,i=r.TWO_PI;-(n+t)>e;)e+=i;if(-n>e)return-n;for(;e>n+t;)e-=i;return e>n?n:e},r.zeroToTwoPi=function(e){var t=e%r.TWO_PI;return 0>t?(t+r.TWO_PI)%r.TWO_PI:t},r.equalsEpsilon=function(t,r,n){return n=e(n,0),Math.abs(t-r)<=n};var n=[1];return r.factorial=function(e){if("number"!=typeof e||0>e)throw new t("A number greater than or equal to 0 is required.");var r=n.length;if(e>=r)for(var i=n[r-1],o=r;e>=o;o++)n.push(i*o);return n[e]},r.incrementWrap=function(r,n,i){if(i=e(i,0),i>=n)throw new t("Maximum value must be greater than minimum value.");return++r,r>n&&(r=i),r},r.isPowerOfTwo=function(r){if("number"!=typeof r||0>r)throw new t("A number greater than or equal to 0 is required.");var n=e(r,0);return 0!==n&&0===(n&n-1)},r.clamp=function(e,t,r){return t>e?t:e>r?r:e},r}),define("Core/Cartographic",["./defaultValue","./defined","./DeveloperError","./freezeObject","./Math"],function(e,t,r,n,i){"use strict";var o=function(t,r,n){this.longitude=e(t,0),this.latitude=e(r,0),this.height=e(n,0)};return o.fromDegrees=function(r,n,a,u){return r=i.toRadians(e(r,0)),n=i.toRadians(e(n,0)),a=e(a,0),t(u)?(u.longitude=r,u.latitude=n,u.height=a,u):new o(r,n,a)},o.clone=function(e,r){return t(e)?t(r)?(r.longitude=e.longitude,r.latitude=e.latitude,r.height=e.height,r):new o(e.longitude,e.latitude,e.height):void 0},o.equals=function(e,r){return e===r||t(e)&&t(r)&&e.longitude===r.longitude&&e.latitude===r.latitude&&e.height===r.height},o.equalsEpsilon=function(e,n,i){if("number"!=typeof i)throw new r("epsilon is required and must be a number.");return e===n||t(e)&&t(n)&&Math.abs(e.longitude-n.longitude)<=i&&Math.abs(e.latitude-n.latitude)<=i&&Math.abs(e.height-n.height)<=i},o.toString=function(e){if(!t(e))throw new r("cartographic is required");return"("+e.longitude+", "+e.latitude+", "+e.height+")"},o.ZERO=n(new o(0,0,0)),o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.equalsEpsilon=function(e,t){return o.equalsEpsilon(this,e,t)},o.prototype.toString=function(){return o.toString(this)},o}),define("Core/Ellipsoid",["./freezeObject","./defaultValue","./defined","./DeveloperError","./Math","./Cartesian3","./Cartographic"],function(e,t,r,n,i,o,a){"use strict";var u=function(e,r,a){if(e=t(e,0),r=t(r,0),a=t(a,0),0>e||0>r||0>a)throw new n("All radii components must be greater than or equal to zero.");this._radii=new o(e,r,a),this._radiiSquared=new o(e*e,r*r,a*a),this._radiiToTheFourth=new o(e*e*e*e,r*r*r*r,a*a*a*a),this._oneOverRadii=new o(0===e?0:1/e,0===r?0:1/r,0===a?0:1/a),this._oneOverRadiiSquared=new o(0===e?0:1/(e*e),0===r?0:1/(r*r),0===a?0:1/(a*a)),this._minimumRadius=Math.min(e,r,a),this._maximumRadius=Math.max(e,r,a),this._centerToleranceSquared=i.EPSILON1};u.clone=function(e,t){if(!r(e))return void 0;var n=e._radii;return r(t)?(o.clone(n,t._radii),o.clone(e._radiiSquared,t._radiiSquared),o.clone(e._radiiToTheFourth,t._radiiToTheFourth),o.clone(e._oneOverRadii,t._oneOverRadii),o.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new u(n.x,n.y,n.z)},u.fromCartesian3=function(e){return r(e)?new u(e.x,e.y,e.z):new u},u.WGS84=e(new u(6378137,6378137,6356752.314245179)),u.UNIT_SPHERE=e(new u(1,1,1)),u.prototype.getRadii=function(){return this._radii},u.prototype.getRadiiSquared=function(){return this._radiiSquared},u.prototype.getRadiiToTheFourth=function(){return this._radiiToTheFourth},u.prototype.getOneOverRadii=function(){return this._oneOverRadii},u.prototype.getOneOverRadiiSquared=function(){return this._oneOverRadiiSquared},u.prototype.getMinimumRadius=function(){return this._minimumRadius},u.prototype.getMaximumRadius=function(){return this._maximumRadius},u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.geocentricSurfaceNormal=o.normalize,u.prototype.geodeticSurfaceNormalCartographic=function(e,t){if(!r(e))throw new n("cartographic is required.");var i=e.longitude,a=e.latitude,u=Math.cos(a),s=u*Math.cos(i),h=u*Math.sin(i),c=Math.sin(a);return r(t)||(t=new o),t.x=s,t.y=h,t.z=c,o.normalize(t,t)},u.prototype.geodeticSurfaceNormal=function(e,t){return t=o.multiplyComponents(e,this._oneOverRadiiSquared,t),o.normalize(t,t)};var s=new o,h=new o;u.prototype.cartographicToCartesian=function(e,t){var r=s,n=h;this.geodeticSurfaceNormalCartographic(e,r),o.multiplyComponents(this._radiiSquared,r,n);var i=Math.sqrt(o.dot(r,n));return o.divideByScalar(n,i,n),o.multiplyByScalar(r,e.height,r),o.add(n,r,t)},u.prototype.cartographicArrayToCartesianArray=function(e,t){if(!r(e))throw new n("cartographics is required.");var i=e.length;r(t)?t.length=i:t=new Array(i);for(var o=0;i>o;o++)t[o]=this.cartographicToCartesian(e[o],t[o]);return t};var c=new o,f=new o,d=new o;u.prototype.cartesianToCartographic=function(e,t){var n=this.scaleToGeodeticSurface(e,f);if(!r(n))return void 0;var u=this.geodeticSurfaceNormal(n,c),s=o.subtract(e,n,d),h=Math.atan2(u.y,u.x),l=Math.asin(u.z),w=i.sign(o.dot(s,e))*o.magnitude(s);return r(t)?(t.longitude=h,t.latitude=l,t.height=w,t):new a(h,l,w)},u.prototype.cartesianArrayToCartographicArray=function(e,t){if(!r(e))throw new n("cartesians is required.");var i=e.length;r(t)?t.length=i:t=new Array(i);for(var o=0;i>o;++o)t[o]=this.cartesianToCartographic(e[o],t[o]);return t};var l,w=new o;return u.prototype.scaleToGeodeticSurface=function(e,t){if(!r(e))throw new n("cartesian is required.");var a=e.x,u=e.y,s=e.z,h=this._oneOverRadii,c=h.x,f=h.y,d=h.z,p=a*a*c*c,m=u*u*f*f,y=s*s*d*d,g=p+m+y,x=Math.sqrt(1/g),v=o.multiplyByScalar(e,x,l);if(g<this._centerToleranceSquared)return isFinite(x)?o.clone(v,t):void 0;var q=this._oneOverRadiiSquared,z=q.x,b=q.y,M=q.z,S=w;S.x=2*v.x*z,S.y=2*v.y*b,S.z=2*v.z*M;var E,O,R,T,C,_,P,I,N,U,A,L=(1-x)*o.magnitude(e)/(.5*o.magnitude(S)),B=0;do{L-=B,R=1/(1+L*z),T=1/(1+L*b),C=1/(1+L*M),_=R*R,P=T*T,I=C*C,N=_*R,U=P*T,A=I*C,E=p*_+m*P+y*I-1,O=p*N*z+m*U*b+y*A*M;var W=-2*O;B=E/W}while(Math.abs(E)>i.EPSILON12);return r(t)?(t.x=a*R,t.y=u*T,t.z=s*C,t):new o(a*R,u*T,s*C)},u.prototype.scaleToGeocentricSurface=function(e,t){if(!r(e))throw new n("cartesian is required.");var i=e.x,a=e.y,u=e.z,s=this._oneOverRadiiSquared,h=1/Math.sqrt(i*i*s.x+a*a*s.y+u*u*s.z);return o.multiplyByScalar(e,h,t)},u.prototype.transformPositionToScaledSpace=function(e,t){return o.multiplyComponents(e,this._oneOverRadii,t)},u.prototype.equals=function(e){return this===e||r(e)&&o.equals(this._radii,e._radii)},u.prototype.toString=function(){return this._radii.toString()},u}),define("Core/GeographicProjection",["./defaultValue","./defined","./Cartesian3","./Cartographic","./Ellipsoid"],function(e,t,r,n,i){"use strict";var o=function(t){this._ellipsoid=e(t,i.WGS84),this._semimajorAxis=this._ellipsoid.getMaximumRadius(),this._oneOverSemimajorAxis=1/this._semimajorAxis};return o.prototype.getEllipsoid=function(){return this._ellipsoid},o.prototype.project=function(e,n){var i=this._semimajorAxis,o=e.longitude*i,a=e.latitude*i,u=e.height;return t(n)?(n.x=o,n.y=a,n.z=u,n):new r(o,a,u)},o.prototype.unproject=function(e,r){var i=this._oneOverSemimajorAxis,o=e.x*i,a=e.y*i,u=e.z;return t(r)?(r.longitude=o,r.latitude=a,r.height=u,r):new n(o,a,u)},o}),define("Core/Enumeration",["./defined"],function(e){"use strict";var t=function(t,r,n){if(this.value=t,this.name=r,e(n))for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i])};return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.name},t}),define("Core/Intersect",["./Enumeration"],function(e){"use strict";var t={OUTSIDE:new e(-1,"OUTSIDE"),INTERSECTING:new e(0,"INTERSECTING"),INSIDE:new e(1,"INSIDE")};return t}),define("Core/Interval",["./defaultValue"],function(e){"use strict";var t=function(t,r){this.start=e(t,0),this.stop=e(r,0)};return t}),define("Core/Matrix3",["./Cartesian3","./defaultValue","./defined","./DeveloperError","./freezeObject"],function(e,t,r,n,i){"use strict";var o=function(e,r,n,i,o,a,u,s,h){this[0]=t(e,0),this[1]=t(i,0),this[2]=t(u,0),this[3]=t(r,0),this[4]=t(o,0),this[5]=t(s,0),this[6]=t(n,0),this[7]=t(a,0),this[8]=t(h,0)};return o.clone=function(e,t){return r(e)?r(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new o(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]):void 0},o.fromColumnMajorArray=function(e,t){if(!r(e))throw new n("values parameter is required");return o.clone(e,t)},o.fromRowMajorArray=function(e,t){if(!r(e))throw new n("values is required.");return r(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new o(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},o.fromQuaternion=function(e,t){if(!r(e))throw new n("quaternion is required");var i=e.x*e.x,a=e.x*e.y,u=e.x*e.z,s=e.x*e.w,h=e.y*e.y,c=e.y*e.z,f=e.y*e.w,d=e.z*e.z,l=e.z*e.w,w=e.w*e.w,p=i-h-d+w,m=2*(a+l),y=2*(u-f),g=2*(a-l),x=-i+h-d+w,v=2*(c+s),q=2*(u+f),z=2*(c-s),b=-i-h+d+w;return r(t)?(t[0]=p,t[1]=g,t[2]=q,t[3]=m,t[4]=x,t[5]=z,t[6]=y,t[7]=v,t[8]=b,t):new o(p,m,y,g,x,v,q,z,b)},o.fromScale=function(e,t){if(!r(e))throw new n("scale is required.");return r(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new o(e.x,0,0,0,e.y,0,0,0,e.z)},o.fromUniformScale=function(e,t){if("number"!=typeof e)throw new n("scale is required.");return r(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new o(e,0,0,0,e,0,0,0,e)},o.fromRotationX=function(e,t){if(!r(e))throw new n("angle is required.");var i=Math.cos(e),a=Math.sin(e);return r(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=i,t[5]=a,t[6]=0,t[7]=-a,t[8]=i,t):new o(1,0,0,0,i,-a,0,a,i)},o.fromRotationY=function(e,t){if(!r(e))throw new n("angle is required.");var i=Math.cos(e),a=Math.sin(e);return r(t)?(t[0]=i,t[1]=0,t[2]=-a,t[3]=0,t[4]=1,t[5]=0,t[6]=a,t[7]=0,t[8]=i,t):new o(i,0,a,0,1,0,-a,0,i)},o.fromRotationZ=function(e,t){if(!r(e))throw new n("angle is required.");var i=Math.cos(e),a=Math.sin(e);return r(t)?(t[0]=i,t[1]=a,t[2]=0,t[3]=-a,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new o(i,-a,0,a,i,0,0,0,1)},o.toArray=function(e,t){if(!r(e))throw new n("matrix is required");return r(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},o.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>2)throw new n("row is required and must be 0, 1, or 2.");if("number"!=typeof e||0>e||e>2)throw new n("column is required and must be 0, 1, or 2.");return 3*e+t},o.getColumn=function(t,i,o){if(!r(t))throw new n("matrix is required.");if("number"!=typeof i||0>i||i>2)throw new n("index is required and must be 0, 1, or 2.");var a=3*i,u=t[a],s=t[a+1],h=t[a+2];return r(o)?(o.x=u,o.y=s,o.z=h,o):new e(u,s,h)},o.setColumn=function(e,t,i,a){if(!r(e))throw new n("matrix is required");if(!r(i))throw new n("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new n("index is required and must be 0, 1, or 2.");a=o.clone(e,a);var u=3*t;return a[u]=i.x,a[u+1]=i.y,a[u+2]=i.z,a},o.getRow=function(t,i,o){if(!r(t))throw new n("matrix is required.");if("number"!=typeof i||0>i||i>2)throw new n("index is required and must be 0, 1, or 2.");var a=t[i],u=t[i+3],s=t[i+6];return r(o)?(o.x=a,o.y=u,o.z=s,o):new e(a,u,s)},o.setRow=function(e,t,i,a){if(!r(e))throw new n("matrix is required");if(!r(i))throw new n("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new n("index is required and must be 0, 1, or 2.");return a=o.clone(e,a),a[t]=i.x,a[t+3]=i.y,a[t+6]=i.z,a},o.multiply=function(e,t,i){if(!r(e))throw new n("left is required");if(!r(t))throw new n("right is required");var a=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],u=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],s=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],h=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],c=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],f=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],d=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],w=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r(i)?(i[0]=a,i[1]=u,i[2]=s,i[3]=h,i[4]=c,i[5]=f,i[6]=d,i[7]=l,i[8]=w,i):new o(a,h,d,u,c,l,s,f,w)},o.multiplyByVector=function(t,i,o){if(!r(t))throw new n("matrix is required");if(!r(i))throw new n("cartesian is required");var a=i.x,u=i.y,s=i.z,h=t[0]*a+t[3]*u+t[6]*s,c=t[1]*a+t[4]*u+t[7]*s,f=t[2]*a+t[5]*u+t[8]*s;return r(o)?(o.x=h,o.y=c,o.z=f,o):new e(h,c,f)},o.multiplyByScalar=function(e,t,i){if(!r(e))throw new n("matrix is required");if("number"!=typeof t)throw new n("scalar is required and must be a number");return r(i)?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i[3]=e[3]*t,i[4]=e[4]*t,i[5]=e[5]*t,i[6]=e[6]*t,i[7]=e[7]*t,i[8]=e[8]*t,i):new o(e[0]*t,e[3]*t,e[6]*t,e[1]*t,e[4]*t,e[7]*t,e[2]*t,e[5]*t,e[8]*t)},o.negate=function(e,t){if(!r(e))throw new n("matrix is required");return r(t)?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t):new o(-e[0],-e[3],-e[6],-e[1],-e[4],-e[7],-e[2],-e[5],-e[8])},o.transpose=function(e,t){if(!r(e))throw new n("matrix is required");var i=e[0],a=e[3],u=e[6],s=e[1],h=e[4],c=e[7],f=e[2],d=e[5],l=e[8];return r(t)?(t[0]=i,t[1]=a,t[2]=u,t[3]=s,t[4]=h,t[5]=c,t[6]=f,t[7]=d,t[8]=l,t):new o(i,s,f,a,h,d,u,c,l)},o.equals=function(e,t){return e===t||r(e)&&r(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equalsEpsilon=function(e,t,i){if("number"!=typeof i)throw new n("epsilon is required and must be a number");return e===t||r(e)&&r(t)&&Math.abs(e[0]-t[0])<=i&&Math.abs(e[1]-t[1])<=i&&Math.abs(e[2]-t[2])<=i&&Math.abs(e[3]-t[3])<=i&&Math.abs(e[4]-t[4])<=i&&Math.abs(e[5]-t[5])<=i&&Math.abs(e[6]-t[6])<=i&&Math.abs(e[7]-t[7])<=i&&Math.abs(e[8]-t[8])<=i},o.IDENTITY=i(new o(1,0,0,0,1,0,0,0,1)),o.COLUMN0ROW0=0,o.COLUMN0ROW1=1,o.COLUMN0ROW2=2,o.COLUMN1ROW0=3,o.COLUMN1ROW1=4,o.COLUMN1ROW2=5,o.COLUMN2ROW0=6,o.COLUMN2ROW1=7,o.COLUMN2ROW2=8,o.prototype.clone=function(e){return o.clone(this,e)},o.prototype.toArray=function(e){return o.toArray(this,e)},o.prototype.getColumn=function(e,t){return o.getColumn(this,e,t)},o.prototype.setColumn=function(e,t,r){return o.setColumn(this,e,t,r)},o.prototype.getRow=function(e,t){return o.getRow(this,e,t)},o.prototype.setRow=function(e,t,r){return o.setRow(this,e,t,r)},o.prototype.multiply=function(e,t){return o.multiply(this,e,t)},o.prototype.multiplyByVector=function(e,t){return o.multiplyByVector(this,e,t)},o.prototype.multiplyByScalar=function(e,t){return o.multiplyByScalar(this,e,t)},o.prototype.negate=function(e){return o.negate(this,e)},o.prototype.transpose=function(e){return o.transpose(this,e)},o.prototype.equals=function(e){return o.equals(this,e)},o.prototype.equalsEpsilon=function(e,t){return o.equalsEpsilon(this,e,t)},o.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"},o}),define("Core/RuntimeError",["./defined"],function(e){"use strict";var t=function(e){this.name="RuntimeError",this.message=e,this.error=new Error,this.stack=this.error.stack};return t.prototype.toString=function(){var t=this.name+": "+this.message;return t+=e(this.stack)?"\n"+this.stack.toString():"\n"+this.error.toString()},t}),define("Core/Matrix4",["./Cartesian3","./Cartesian4","./defaultValue","./defined","./DeveloperError","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(e,t,r,n,i,o,a,u,s){"use strict";var h=function(e,t,n,i,o,a,u,s,h,c,f,d,l,w,p,m){this[0]=r(e,0),this[1]=r(o,0),this[2]=r(h,0),this[3]=r(l,0),this[4]=r(t,0),this[5]=r(a,0),this[6]=r(c,0),this[7]=r(w,0),this[8]=r(n,0),this[9]=r(u,0),this[10]=r(f,0),this[11]=r(p,0),this[12]=r(i,0),this[13]=r(s,0),this[14]=r(d,0),this[15]=r(m,0)};h.clone=function(e,t){return n(e)?n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new h(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):void 0},h.fromColumnMajorArray=function(e,t){if(!n(e))throw new i("values parameter is required");return h.clone(e,t)},h.fromRowMajorArray=function(e,t){if(!n(e))throw new i("values is required.");return n(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new h(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},h.fromRotationTranslation=function(e,t,r){if(!n(e))throw new i("rotation is required.");if(!n(t))throw new i("translation is required.");return n(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new h(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},h.fromTranslation=function(e,t){return h.fromRotationTranslation(u.IDENTITY,e,t)},h.fromScale=function(e,t){if(!n(e))throw new i("scale is required.");return n(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new h(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},h.fromUniformScale=function(e,t){if("number"!=typeof e)throw new i("scale is required.");return n(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new h(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var c=new e,f=new e,d=new e;h.fromCamera=function(t,r){if(!n(t))throw new i("camera is required.");var o=t.eye,a=t.target,u=t.up;if(!n(o))throw new i("camera.eye is required.");if(!n(a))throw new i("camera.target is required.");if(!n(u))throw new i("camera.up is required.");e.subtract(a,o,c).normalize(c),e.cross(c,u,f).normalize(f),e.cross(f,c,d).normalize(d);var s=f.x,l=f.y,w=f.z,p=c.x,m=c.y,y=c.z,g=d.x,x=d.y,v=d.z,q=o.x,z=o.y,b=o.z,M=s*-q+l*-z+w*-b,S=g*-q+x*-z+v*-b,E=p*q+m*z+y*b;return n(r)?(r[0]=s,r[1]=g,r[2]=-p,r[3]=0,r[4]=l,r[5]=x,r[6]=-m,r[7]=0,r[8]=w,r[9]=v,r[10]=-y,r[11]=0,r[12]=M,r[13]=S,r[14]=E,r[15]=1,r):new h(s,l,w,M,g,x,v,S,-p,-m,-y,E,0,0,0,1)},h.computePerspectiveFieldOfView=function(e,t,r,o,a){if(0>=e||e>Math.PI)throw new i("fovY must be in [0, PI).");if(0>=t)throw new i("aspectRatio must be greater than zero.");if(0>=r)throw new i("near must be greater than zero.");if(0>=o)throw new i("far must be greater than zero.");var u=Math.tan(.5*e),s=1/u,c=s/t,f=(o+r)/(r-o),d=2*o*r/(r-o);return n(a)?(a[0]=c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=f,a[11]=-1,a[12]=0,a[13]=0,a[14]=d,a[15]=0,a):new h(c,0,0,0,0,s,0,0,0,0,f,d,0,0,-1,0)},h.computeOrthographicOffCenter=function(e,t,r,o,a,u,s){if(!n(e))throw new i("left is required.");
if(!n(t))throw new i("right is required.");if(!n(r))throw new i("bottom is required.");if(!n(o))throw new i("top is required.");if(!n(a))throw new i("near is required.");if(!n(u))throw new i("far is required.");var c=1/(t-e),f=1/(o-r),d=1/(u-a),l=-(t+e)*c,w=-(o+r)*f,p=-(u+a)*d;return c*=2,f*=2,d*=-2,n(s)?(s[0]=c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=f,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=d,s[11]=0,s[12]=l,s[13]=w,s[14]=p,s[15]=1,s):new h(c,0,0,l,0,f,0,w,0,0,d,p,0,0,0,1)},h.computePerspectiveOffCenter=function(e,t,r,o,a,u,s){if(!n(e))throw new i("left is required.");if(!n(t))throw new i("right is required.");if(!n(r))throw new i("bottom is required.");if(!n(o))throw new i("top is required.");if(!n(a))throw new i("near is required.");if(!n(u))throw new i("far is required.");var c=2*a/(t-e),f=2*a/(o-r),d=(t+e)/(t-e),l=(o+r)/(o-r),w=-(u+a)/(u-a),p=-1,m=-2*u*a/(u-a);return n(s)?(s[0]=c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=f,s[6]=0,s[7]=0,s[8]=d,s[9]=l,s[10]=w,s[11]=p,s[12]=0,s[13]=0,s[14]=m,s[15]=0,s):new h(c,0,d,0,0,f,l,0,0,0,w,m,0,0,p,0)},h.computeInfinitePerspectiveOffCenter=function(e,t,r,o,a,u){if(!n(e))throw new i("left is required.");if(!n(t))throw new i("right is required.");if(!n(r))throw new i("bottom is required.");if(!n(o))throw new i("top is required.");if(!n(a))throw new i("near is required.");var s=2*a/(t-e),c=2*a/(o-r),f=(t+e)/(t-e),d=(o+r)/(o-r),l=-1,w=-1,p=-2*a;return n(u)?(u[0]=s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=c,u[6]=0,u[7]=0,u[8]=f,u[9]=d,u[10]=l,u[11]=w,u[12]=0,u[13]=0,u[14]=p,u[15]=0,u):new h(s,0,f,0,0,c,d,0,0,0,l,p,0,0,w,0)},h.computeViewportTransformation=function(e,t,i,o){e=r(e,r.EMPTY_OBJECT);var a=r(e.x,0),u=r(e.y,0),s=r(e.width,0),c=r(e.height,0);t=r(t,0),i=r(i,1);var f=.5*s,d=.5*c,l=.5*(i-t),w=f,p=d,m=l,y=a+f,g=u+d,x=t+l,v=1;return n(o)?(o[0]=w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=p,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=m,o[11]=0,o[12]=y,o[13]=g,o[14]=x,o[15]=v,o):new h(w,0,0,y,0,p,0,g,0,0,m,x,0,0,0,v)},h.toArray=function(e,t){if(!n(e))throw new i("matrix is required");return n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},h.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>3)throw new i("row is required and must be 0, 1, 2, or 3.");if("number"!=typeof e||0>e||e>3)throw new i("column is required and must be 0, 1, 2, or 3.");return 4*e+t},h.getColumn=function(e,r,o){if(!n(e))throw new i("matrix is required.");if("number"!=typeof r||0>r||r>3)throw new i("index is required and must be 0, 1, 2, or 3.");var a=4*r,u=e[a],s=e[a+1],h=e[a+2],c=e[a+3];return n(o)?(o.x=u,o.y=s,o.z=h,o.w=c,o):new t(u,s,h,c)},h.setColumn=function(e,t,r,o){if(!n(e))throw new i("matrix is required");if(!n(r))throw new i("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new i("index is required and must be 0, 1, 2, or 3.");o=h.clone(e,o);var a=4*t;return o[a]=r.x,o[a+1]=r.y,o[a+2]=r.z,o[a+3]=r.w,o},h.getRow=function(e,r,o){if(!n(e))throw new i("matrix is required.");if("number"!=typeof r||0>r||r>3)throw new i("index is required and must be 0, 1, 2, or 3.");var a=e[r],u=e[r+4],s=e[r+8],h=e[r+12];return n(o)?(o.x=a,o.y=u,o.z=s,o.w=h,o):new t(a,u,s,h)},h.setRow=function(e,t,r,o){if(!n(e))throw new i("matrix is required");if(!n(r))throw new i("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new i("index is required and must be 0, 1, 2, or 3.");return o=h.clone(e,o),o[t]=r.x,o[t+4]=r.y,o[t+8]=r.z,o[t+12]=r.w,o},h.multiply=function(e,t,r){if(!n(e))throw new i("left is required");if(!n(t))throw new i("right is required");var o=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],d=e[6],l=e[7],w=e[8],p=e[9],m=e[10],y=e[11],g=e[12],x=e[13],v=e[14],q=e[15],z=t[0],b=t[1],M=t[2],S=t[3],E=t[4],O=t[5],R=t[6],T=t[7],C=t[8],_=t[9],P=t[10],I=t[11],N=t[12],U=t[13],A=t[14],L=t[15],B=o*z+c*b+w*M+g*S,W=a*z+f*b+p*M+x*S,D=u*z+d*b+m*M+v*S,V=s*z+l*b+y*M+q*S,j=o*E+c*O+w*R+g*T,H=a*E+f*O+p*R+x*T,F=u*E+d*O+m*R+v*T,k=s*E+l*O+y*R+q*T,G=o*C+c*_+w*P+g*I,Z=a*C+f*_+p*P+x*I,Y=u*C+d*_+m*P+v*I,X=s*C+l*_+y*P+q*I,J=o*N+c*U+w*A+g*L,K=a*N+f*U+p*A+x*L,Q=u*N+d*U+m*A+v*L,$=s*N+l*U+y*A+q*L;return n(r)?(r[0]=B,r[1]=W,r[2]=D,r[3]=V,r[4]=j,r[5]=H,r[6]=F,r[7]=k,r[8]=G,r[9]=Z,r[10]=Y,r[11]=X,r[12]=J,r[13]=K,r[14]=Q,r[15]=$,r):new h(B,j,G,J,W,H,Z,K,D,F,Y,Q,V,k,X,$)},h.multiplyByTranslation=function(e,t,r){if(!n(e))throw new i("matrix is required");if(!n(t))throw new i("translation is required");var o=t.x,a=t.y,u=t.z,s=o*e[0]+a*e[4]+u*e[8]+e[12],c=o*e[1]+a*e[5]+u*e[9]+e[13],f=o*e[2]+a*e[6]+u*e[10]+e[14];return n(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=s,r[13]=c,r[14]=f,r[15]=e[15],r):new h(e[0],e[4],e[8],s,e[1],e[5],e[9],c,e[2],e[6],e[10],f,e[3],e[7],e[11],e[15])},h.multiplyByUniformScale=function(e,t,r){if(!n(e))throw new i("matrix is required");if("number"!=typeof t)throw new i("scale is required");return 1===t?h.clone(e,r):n(r)?(r[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=0,r[4]=t*e[4],r[5]=t*e[5],r[6]=t*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r):new h(t*e[0],t*e[4],t*e[8],e[12],t*e[1],t*e[5],t*e[9],e[13],t*e[2],t*e[6],t*e[10],e[14],0,0,0,1)},h.multiplyByVector=function(e,r,o){if(!n(e))throw new i("matrix is required");if(!n(r))throw new i("cartesian is required");var a=r.x,u=r.y,s=r.z,h=r.w,c=e[0]*a+e[4]*u+e[8]*s+e[12]*h,f=e[1]*a+e[5]*u+e[9]*s+e[13]*h,d=e[2]*a+e[6]*u+e[10]*s+e[14]*h,l=e[3]*a+e[7]*u+e[11]*s+e[15]*h;return n(o)?(o.x=c,o.y=f,o.z=d,o.w=l,o):new t(c,f,d,l)};var l=new t(0,0,0,1);return h.multiplyByPoint=function(e,t,r){if(!n(t))throw new i("cartesian is required");return l.x=t.x,l.y=t.y,l.z=t.z,h.multiplyByVector(e,l,r)},h.multiplyByScalar=function(e,t,r){if(!n(e))throw new i("matrix is required");if("number"!=typeof t)throw new i("scalar is required and must be a number");return n(r)?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r):new h(e[0]*t,e[4]*t,e[8]*t,e[12]*t,e[1]*t,e[5]*t,e[9]*t,e[13]*t,e[2]*t,e[6]*t,e[10]*t,e[14]*t,e[3]*t,e[7]*t,e[11]*t,e[15]*t)},h.negate=function(e,t){if(!n(e))throw new i("matrix is required");return n(t)?(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t):new h(-e[0],-e[4],-e[8],-e[12],-e[1],-e[5],-e[9],-e[13],-e[2],-e[6],-e[10],-e[14],-e[3],-e[7],-e[11],-e[15])},h.transpose=function(e,t){if(!n(e))throw new i("matrix is required");if(!n(t))return new h(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);var r=e[1],o=e[2],a=e[3],u=e[6],s=e[7],c=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=u,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=s,t[14]=c,t[15]=e[15],t},h.equals=function(e,t){return e===t||n(e)&&n(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},h.equalsEpsilon=function(e,t,r){if("number"!=typeof r)throw new i("epsilon is required and must be a number");return e===t||n(e)&&n(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},h.getTranslation=function(t,r){if(!n(t))throw new i("matrix is required");return n(r)?(r.x=t[12],r.y=t[13],r.z=t[14],r):new e(t[12],t[13],t[14])},h.getRotation=function(e,t){if(!n(e))throw new i("matrix is required");return n(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t):new u(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},h.inverse=function(e,t){if(!n(e))throw new i("matrix is required");var r=e[0],o=e[4],u=e[8],c=e[12],f=e[1],d=e[5],l=e[9],w=e[13],p=e[2],m=e[6],y=e[10],g=e[14],x=e[3],v=e[7],q=e[11],z=e[15],b=y*z,M=g*q,S=m*z,E=g*v,O=m*q,R=y*v,T=p*z,C=g*x,_=p*q,P=y*x,I=p*v,N=m*x,U=b*d+E*l+O*w-(M*d+S*l+R*w),A=M*f+T*l+P*w-(b*f+C*l+_*w),L=S*f+C*d+I*w-(E*f+T*d+N*w),B=R*f+_*d+N*l-(O*f+P*d+I*l),W=M*o+S*u+R*c-(b*o+E*u+O*c),D=b*r+C*u+_*c-(M*r+T*u+P*c),V=E*r+T*o+N*c-(S*r+C*o+I*c),j=O*r+P*o+I*u-(R*r+_*o+N*u);b=u*w,M=c*l,S=o*w,E=c*d,O=o*l,R=u*d,T=r*w,C=c*f,_=r*l,P=u*f,I=r*d,N=o*f;var H=b*v+E*q+O*z-(M*v+S*q+R*z),F=M*x+T*q+P*z-(b*x+C*q+_*z),k=S*x+C*v+I*z-(E*x+T*v+N*z),G=R*x+_*v+N*q-(O*x+P*v+I*q),Z=S*y+R*g+M*m-(O*g+b*m+E*y),Y=_*g+b*p+C*y-(T*y+P*g+M*p),X=T*m+N*g+E*p-(I*g+S*p+C*m),J=I*y+O*p+P*m-(_*m+N*y+R*p),K=r*U+o*A+u*L+c*B;if(Math.abs(K)<a.EPSILON20)throw new s("matrix is not invertible because its determinate is zero.");return K=1/K,n(t)?(t[0]=U*K,t[1]=A*K,t[2]=L*K,t[3]=B*K,t[4]=W*K,t[5]=D*K,t[6]=V*K,t[7]=j*K,t[8]=H*K,t[9]=F*K,t[10]=k*K,t[11]=G*K,t[12]=Z*K,t[13]=Y*K,t[14]=X*K,t[15]=J*K,t):new h(U*K,W*K,H*K,Z*K,A*K,D*K,F*K,Y*K,L*K,V*K,k*K,X*K,B*K,j*K,G*K,J*K)},h.inverseTransformation=function(e,t){if(!n(e))throw new i("matrix is required");var r=e[0],o=e[1],a=e[2],u=e[4],s=e[5],c=e[6],f=e[8],d=e[9],l=e[10],w=e[12],p=e[13],m=e[14],y=-r*w-o*p-a*m,g=-u*w-s*p-c*m,x=-f*w-d*p-l*m;return n(t)?(t[0]=r,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=d,t[7]=0,t[8]=a,t[9]=c,t[10]=l,t[11]=0,t[12]=y,t[13]=g,t[14]=x,t[15]=1,t):new h(r,o,a,y,u,s,c,g,f,d,l,x,0,0,0,1)},h.IDENTITY=o(new h(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),h.COLUMN0ROW0=0,h.COLUMN0ROW1=1,h.COLUMN0ROW2=2,h.COLUMN0ROW3=3,h.COLUMN1ROW0=4,h.COLUMN1ROW1=5,h.COLUMN1ROW2=6,h.COLUMN1ROW3=7,h.COLUMN2ROW0=8,h.COLUMN2ROW1=9,h.COLUMN2ROW2=10,h.COLUMN2ROW3=11,h.COLUMN3ROW0=12,h.COLUMN3ROW1=13,h.COLUMN3ROW2=14,h.COLUMN3ROW3=15,h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.toArray=function(e){return h.toArray(this,e)},h.prototype.getColumn=function(e,t){return h.getColumn(this,e,t)},h.prototype.setColumn=function(e,t,r){return h.setColumn(this,e,t,r)},h.prototype.getRow=function(e,t){return h.getRow(this,e,t)},h.prototype.setRow=function(e,t,r){return h.setRow(this,e,t,r)},h.prototype.multiply=function(e,t){return h.multiply(this,e,t)},h.prototype.multiplyByTranslation=function(e,t){return h.multiplyByTranslation(this,e,t)},h.prototype.multiplyByUniformScale=function(e,t){return h.multiplyByUniformScale(this,e,t)},h.prototype.multiplyByVector=function(e,t){return h.multiplyByVector(this,e,t)},h.prototype.multiplyByPoint=function(e,t){return h.multiplyByPoint(this,e,t)},h.prototype.multiplyByScalar=function(e,t){return h.multiplyByScalar(this,e,t)},h.prototype.negate=function(e){return h.negate(this,e)},h.prototype.transpose=function(e){return h.transpose(this,e)},h.prototype.equals=function(e){return h.equals(this,e)},h.prototype.equalsEpsilon=function(e,t){return h.equalsEpsilon(this,e,t)},h.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},h.prototype.getTranslation=function(e){return h.getTranslation(this,e)},h.prototype.getRotation=function(e){return h.getRotation(this,e)},h.prototype.inverse=function(e){return h.inverse(this,e)},h.prototype.inverseTransformation=function(e){return h.inverseTransformation(this,e)},h}),define("Core/BoundingSphere",["./defaultValue","./defined","./DeveloperError","./Cartesian3","./Cartesian4","./Cartographic","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix4"],function(e,t,r,n,i,o,a,u,s,h,c){"use strict";var f=function(t,r){this.center=n.clone(e(t,n.ZERO)),this.radius=e(r,0)},d=new n,l=new n,w=new n,p=new n,m=new n,y=new n,g=new n,x=new n,v=new n,q=new n,z=new n,b=new n;f.fromPoints=function(e,r){if(t(r)||(r=new f),!t(e)||0===e.length)return r.center=n.ZERO.clone(r.center),r.radius=0,r;for(var i=n.clone(e[0],g),o=n.clone(i,d),a=n.clone(i,l),u=n.clone(i,w),s=n.clone(i,p),h=n.clone(i,m),c=n.clone(i,y),M=e.length,S=1;M>S;S++){n.clone(e[S],i);var E=i.x,O=i.y,R=i.z;E<o.x&&n.clone(i,o),E>s.x&&n.clone(i,s),O<a.y&&n.clone(i,a),O>h.y&&n.clone(i,h),R<u.z&&n.clone(i,u),R>c.z&&n.clone(i,c)}var T=n.magnitudeSquared(n.subtract(s,o,x)),C=n.magnitudeSquared(n.subtract(h,a,x)),_=n.magnitudeSquared(n.subtract(c,u,x)),P=o,I=s,N=T;C>N&&(N=C,P=a,I=h),_>N&&(N=_,P=u,I=c);var U=v;U.x=.5*(P.x+I.x),U.y=.5*(P.y+I.y),U.z=.5*(P.z+I.z);var A=n.magnitudeSquared(n.subtract(I,U,x)),L=Math.sqrt(A),B=q;B.x=o.x,B.y=a.y,B.z=u.z;var W=z;W.x=s.x,W.y=h.y,W.z=c.z;var D=n.multiplyByScalar(n.add(B,W,x),.5,b),V=0;for(S=0;M>S;S++){n.clone(e[S],i);var j=n.magnitude(n.subtract(i,D,x));j>V&&(V=j);var H=n.magnitudeSquared(n.subtract(i,U,x));if(H>A){var F=Math.sqrt(H);L=.5*(L+F),A=L*L;var k=F-L;U.x=(L*U.x+k*i.x)/F,U.y=(L*U.y+k*i.y)/F,U.z=(L*U.z+k*i.z)/F}}return V>L?(n.clone(U,r.center),r.radius=L):(n.clone(D,r.center),r.radius=V),r};var M=new u,S=new n,E=new n,O=new o,R=new o;f.fromExtent2D=function(e,t,r){return f.fromExtentWithHeights2D(e,t,0,0,r)},f.fromExtentWithHeights2D=function(r,i,o,a,u){if(t(u)||(u=new f),!t(r))return u.center=n.ZERO.clone(u.center),u.radius=0,u;i=e(i,M),r.getSouthwest(O),O.height=o,r.getNortheast(R),R.height=a;var s=i.project(O,S),h=i.project(R,E),c=h.x-s.x,d=h.y-s.y,l=h.z-s.z;u.radius=.5*Math.sqrt(c*c+d*d+l*l);var w=u.center;return w.x=s.x+.5*c,w.y=s.y+.5*d,w.z=s.z+.5*l,u};var T=[];f.fromExtent3D=function(r,n,i,o){n=e(n,a.WGS84),i=e(i,0);var u;return t(r)&&(u=r.subsample(n,i,T)),f.fromPoints(u,o)},f.fromVertices=function(e,i,o,a){if(t(a)||(a=new f),!t(e)||0===e.length)return a.center=n.ZERO.clone(a.center),a.radius=0,a;if(t(i)||(i=n.ZERO),t(o)||(o=3),3>o)throw new r("stride must be 3 or greater.");var u=g;u.x=e[0]+i.x,u.y=e[1]+i.y,u.z=e[2]+i.z;for(var s=n.clone(u,d),h=n.clone(u,l),c=n.clone(u,w),M=n.clone(u,p),S=n.clone(u,m),E=n.clone(u,y),O=e.length,R=0;O>R;R+=o){var T=e[R]+i.x,C=e[R+1]+i.y,_=e[R+2]+i.z;u.x=T,u.y=C,u.z=_,T<s.x&&n.clone(u,s),T>M.x&&n.clone(u,M),C<h.y&&n.clone(u,h),C>S.y&&n.clone(u,S),_<c.z&&n.clone(u,c),_>E.z&&n.clone(u,E)}var P=n.magnitudeSquared(n.subtract(M,s,x)),I=n.magnitudeSquared(n.subtract(S,h,x)),N=n.magnitudeSquared(n.subtract(E,c,x)),U=s,A=M,L=P;I>L&&(L=I,U=h,A=S),N>L&&(L=N,U=c,A=E);var B=v;B.x=.5*(U.x+A.x),B.y=.5*(U.y+A.y),B.z=.5*(U.z+A.z);var W=n.magnitudeSquared(n.subtract(A,B,x)),D=Math.sqrt(W),V=q;V.x=s.x,V.y=h.y,V.z=c.z;var j=z;j.x=M.x,j.y=S.y,j.z=E.z;var H=n.multiplyByScalar(n.add(V,j,x),.5,b),F=0;for(R=0;O>R;R+=o){u.x=e[R]+i.x,u.y=e[R+1]+i.y,u.z=e[R+2]+i.z;var k=n.magnitude(n.subtract(u,H,x));k>F&&(F=k);var G=n.magnitudeSquared(n.subtract(u,B,x));if(G>W){var Z=Math.sqrt(G);D=.5*(D+Z),W=D*D;var Y=Z-D;B.x=(D*B.x+Y*u.x)/Z,B.y=(D*B.y+Y*u.y)/Z,B.z=(D*B.z+Y*u.z)/Z}}return F>D?(n.clone(B,a.center),a.radius=D):(n.clone(H,a.center),a.radius=F),a},f.fromCornerPoints=function(e,i,o){if(!t(e)||!t(i))throw new r("corner and oppositeCorner are required.");t(o)||(o=new f);var a=o.center;return n.add(e,i,a),n.multiplyByScalar(a,.5,a),o.radius=n.distance(a,i),o},f.fromEllipsoid=function(e,i){if(!t(e))throw new r("ellipsoid is required.");return t(i)||(i=new f),n.clone(n.ZERO,i.center),i.radius=e.getMaximumRadius(),i},f.clone=function(e,r){return t(e)?t(r)?(r.center=n.clone(e.center,r.center),r.radius=e.radius,r):new f(e.center,e.radius):void 0};var C=new n,_=new n;f.union=function(e,i,o){if(!t(e))throw new r("left is required.");if(!t(i))throw new r("right is required.");t(o)||(o=new f);var a=e.center,u=i.center;n.add(a,u,_);var s=n.multiplyByScalar(_,.5,_),h=n.subtract(a,s,C).magnitude()+e.radius,c=n.subtract(u,s,C).magnitude()+i.radius;return o.radius=Math.max(h,c),n.clone(s,o.center),o};var P=new n;f.expand=function(e,i,o){if(!t(e))throw new r("sphere is required.");if(!t(i))throw new r("point is required.");o=f.clone(e,o);var a=n.subtract(i,o.center,P).magnitude();return a>o.radius&&(o.radius=a),o},f.intersect=function(e,i){if(!t(e))throw new r("sphere is required.");if(!t(i))throw new r("plane is required.");var o=e.center,a=e.radius,u=n.dot(i,o)+i.w;return-a>u?s.OUTSIDE:a>u?s.INTERSECTING:s.INSIDE};var I=i.UNIT_W.clone();f.transform=function(e,i,o){if(!t(e))throw new r("sphere is required.");if(!t(i))throw new r("transform is required.");return t(o)||(o=new f),c.multiplyByPoint(i,e.center,I),n.clone(I,o.center),o.radius=e.radius,o};var N=new n;f.getPlaneDistances=function(e,i,o,a){if(!t(e))throw new r("sphere is required.");if(!t(i))throw new r("position is required.");if(!t(o))throw new r("direction is required.");t(a)||(a=new h);var u=n.subtract(e.center,i,N),s=n.multiplyByScalar(o,o.dot(u),N),c=s.magnitude();return a.start=c-e.radius,a.stop=c+e.radius,a};for(var U=new n,A=new n,L=new n,B=new n,W=new n,D=new o,V=new Array(8),j=0;8>j;++j)V[j]=new n;var H=new u;return f.projectTo2D=function(i,o,a){if(!t(i))throw new r("sphere is required.");o=e(o,H);var u=o.getEllipsoid(),s=i.center,h=i.radius,c=u.geodeticSurfaceNormal(s,U),d=n.cross(n.UNIT_Z,c,A);n.normalize(d,d);var l=n.cross(c,d,L);n.normalize(l,l),n.multiplyByScalar(c,h,c),n.multiplyByScalar(l,h,l),n.multiplyByScalar(d,h,d);var w=n.negate(l,W),p=n.negate(d,B),m=V,y=m[0];n.add(c,l,y),n.add(y,d,y),y=m[1],n.add(c,l,y),n.add(y,p,y),y=m[2],n.add(c,w,y),n.add(y,p,y),y=m[3],n.add(c,w,y),n.add(y,d,y),n.negate(c,c),y=m[4],n.add(c,l,y),n.add(y,d,y),y=m[5],n.add(c,l,y),n.add(y,p,y),y=m[6],n.add(c,w,y),n.add(y,p,y),y=m[7],n.add(c,w,y),n.add(y,d,y);for(var g=m.length,x=0;g>x;++x){var v=m[x];n.add(s,v,v);var q=u.cartesianToCartographic(v,D);o.project(q,v)}a=f.fromPoints(m,a),s=a.center;var z=s.x,b=s.y,M=s.z;return s.x=M,s.y=z,s.z=b,a},f.equals=function(e,r){return e===r||t(e)&&t(r)&&n.equals(e.center,r.center)&&e.radius===r.radius},f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.union=function(e,t){return f.union(this,e,t)},f.prototype.expand=function(e,t){return f.expand(this,e,t)},f.prototype.intersect=function(e){return f.intersect(this,e)},f.prototype.transform=function(e,t){return f.transform(this,e,t)},f.prototype.getPlaneDistances=function(e,t,r){return f.getPlaneDistances(this,e,t,r)},f.prototype.projectTo2D=function(e,t){return f.projectTo2D(this,e,t)},f.prototype.equals=function(e){return f.equals(this,e)},f}),define("Core/EllipsoidalOccluder",["./defaultValue","./defined","./DeveloperError","./Cartesian3","./BoundingSphere"],function(e,t,r,n,i){"use strict";function o(e,t,r){var n=e.transformPositionToScaledSpace(t,d),i=n.magnitudeSquared(),o=Math.sqrt(i),a=n.divideByScalar(o,l);i=Math.max(1,i),o=Math.max(1,o);var u=a.dot(r),s=a.cross(r).magnitude(),h=1/o,c=Math.sqrt(i-1)*h;return 1/(u*h-s*c)}function a(e,t,r){return 0>=t||t===1/0||t!==t?void 0:e.multiplyByScalar(t,r)}function u(e,t){return e.transformPositionToScaledSpace(t,w),w.normalize(w)}var s=function(e,i){if(!t(e))throw new r("ellipsoid is required.");this._ellipsoid=e,this._cameraPosition=new n,this._cameraPositionInScaledSpace=new n,this._distanceToLimbInScaledSpaceSquared=0,t(i)&&this.setCameraPosition(i)};s.prototype.getEllipsoid=function(){return this._ellipsoid},s.prototype.setCameraPosition=function(e){var t=this._ellipsoid,r=t.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=n.magnitudeSquared(r)-1;n.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=r,this._distanceToLimbInScaledSpaceSquared=i},s.prototype.getCameraPosition=function(){return this._cameraPosition};var h=new n;s.prototype.isPointVisible=function(e){var t=this._ellipsoid,r=t.transformPositionToScaledSpace(e,h);return this.isScaledSpacePointVisible(r)},s.prototype.isScaledSpacePointVisible=function(e){var t=this._cameraPositionInScaledSpace,r=this._distanceToLimbInScaledSpaceSquared,i=n.subtract(e,t,h),o=-i.dot(t),a=o>r&&o*o/i.magnitudeSquared()>r;return!a},s.prototype.computeHorizonCullingPoint=function(e,n,i){if(!t(e))throw new r("directionToPoint is required");if(!t(n))throw new r("positions is required");for(var s=this._ellipsoid,h=u(s,e),c=0,f=0,d=n.length;d>f;++f){var l=n[f],w=o(s,l,h);c=Math.max(c,w)}return a(h,c,i)};var c=new n;s.prototype.computeHorizonCullingPointFromVertices=function(i,s,h,f,d){if(!t(i))throw new r("directionToPoint is required");if(!t(s))throw new r("vertices is required");if(!t(h))throw new r("stride is required");f=e(f,n.ZERO);for(var l=this._ellipsoid,w=u(l,i),p=0,m=0,y=s.length;y>m;m+=h){c.x=s[m]+f.x,c.y=s[m+1]+f.y,c.z=s[m+2]+f.z;var g=o(l,c,w);p=Math.max(p,g)}return a(w,p,d)};var f=[];s.prototype.computeHorizonCullingPointFromExtent=function(e,n,o){if(!t(e))throw new r("extent is required.");var a=e.subsample(n,0,f),u=i.fromPoints(a);return u.center.magnitude()<.1*n.getMinimumRadius()?void 0:this.computeHorizonCullingPoint(u.center,a,o)};var d=new n,l=new n,w=new n;return s}),define("Core/Extent",["./freezeObject","./defaultValue","./defined","./Ellipsoid","./Cartographic","./DeveloperError","./Math"],function(e,t,r,n,i,o,a){"use strict";var u=function(e,r,n,i){this.west=t(e,0),this.south=t(r,0),this.east=t(n,0),this.north=t(i,0)};u.fromDegrees=function(e,n,i,o,s){return e=a.toRadians(t(e,0)),n=a.toRadians(t(n,0)),i=a.toRadians(t(i,0)),o=a.toRadians(t(o,0)),r(s)?(s.west=e,s.south=n,s.east=i,s.north=o,s):new u(e,n,i,o)},u.fromCartographicArray=function(e,t){if(!r(e))throw new o("cartographics is required.");for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,h=0,c=e.length;c>h;h++){var f=e[h];n=Math.min(n,f.longitude),i=Math.max(i,f.longitude),a=Math.min(a,f.latitude),s=Math.max(s,f.latitude)}return r(t)?(t.west=n,t.south=a,t.east=i,t.north=s,t):new u(n,a,i,s)},u.clone=function(e,t){return r(e)?r(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new u(e.west,e.south,e.east,e.north):void 0},u.prototype.clone=function(e){return u.clone(this,e)},u.prototype.equals=function(e){return u.equals(this,e)},u.equals=function(e,t){return e===t||r(e)&&r(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},u.prototype.equalsEpsilon=function(e,t){if("number"!=typeof t)throw new o("epsilon is required and must be a number.");return r(e)&&Math.abs(this.west-e.west)<=t&&Math.abs(this.south-e.south)<=t&&Math.abs(this.east-e.east)<=t&&Math.abs(this.north-e.north)<=t},u.prototype.validate=function(){var e=this.north;if("number"!=typeof e)throw new o("north is required to be a number.");if(e<-a.PI_OVER_TWO||e>a.PI_OVER_TWO)throw new o("north must be in the interval [-Pi/2, Pi/2].");var t=this.south;if("number"!=typeof t)throw new o("south is required to be a number.");if(t<-a.PI_OVER_TWO||t>a.PI_OVER_TWO)throw new o("south must be in the interval [-Pi/2, Pi/2].");var r=this.west;if("number"!=typeof r)throw new o("west is required to be a number.");if(r<-Math.PI||r>Math.PI)throw new o("west must be in the interval [-Pi, Pi].");var n=this.east;if("number"!=typeof n)throw new o("east is required to be a number.");if(n<-Math.PI||n>Math.PI)throw new o("east must be in the interval [-Pi, Pi].")},u.prototype.getSouthwest=function(e){return r(e)?(e.longitude=this.west,e.latitude=this.south,e.height=0,e):new i(this.west,this.south)},u.prototype.getNorthwest=function(e){return r(e)?(e.longitude=this.west,e.latitude=this.north,e.height=0,e):new i(this.west,this.north)},u.prototype.getNortheast=function(e){return r(e)?(e.longitude=this.east,e.latitude=this.north,e.height=0,e):new i(this.east,this.north)},u.prototype.getSoutheast=function(e){return r(e)?(e.longitude=this.east,e.latitude=this.south,e.height=0,e):new i(this.east,this.south)},u.prototype.getCenter=function(e){return r(e)?(e.longitude=.5*(this.west+this.east),e.latitude=.5*(this.south+this.north),e.height=0,e):new i(.5*(this.west+this.east),.5*(this.south+this.north))},u.prototype.intersectWith=function(e,t){if(!r(e))throw new o("otherExtent is required.");var n=Math.max(this.west,e.west),i=Math.max(this.south,e.south),a=Math.min(this.east,e.east),s=Math.min(this.north,e.north);return r(t)?(t.west=n,t.south=i,t.east=a,t.north=s,t):new u(n,i,a,s)},u.prototype.contains=function(e){if(!r(e))throw new o("cartographic is required.");return e.longitude>=this.west&&e.longitude<=this.east&&e.latitude>=this.south&&e.latitude<=this.north},u.prototype.isEmpty=function(){return this.west>=this.east||this.south>=this.north};var s=new i;return u.prototype.subsample=function(e,i,o){e=t(e,n.WGS84),i=t(i,0),r(o)||(o=[]);var u=0,h=this.north,c=this.south,f=this.east,d=this.west,l=s;l.height=i,l.longitude=d,l.latitude=h,o[u]=e.cartographicToCartesian(l,o[u]),u++,l.longitude=f,o[u]=e.cartographicToCartesian(l,o[u]),u++,l.latitude=c,o[u]=e.cartographicToCartesian(l,o[u]),u++,l.longitude=d,o[u]=e.cartographicToCartesian(l,o[u]),u++,l.latitude=0>h?h:c>0?c:0;for(var w=1;8>w;++w){var p=-Math.PI+w*a.PI_OVER_TWO;p>d&&f>p&&(l.longitude=p,o[u]=e.cartographicToCartesian(l,o[u]),u++)}return 0===l.latitude&&(l.longitude=d,o[u]=e.cartographicToCartesian(l,o[u]),u++,l.longitude=f,o[u]=e.cartographicToCartesian(l,o[u]),u++),o.length=u,o},u.MAX_VALUE=e(new u(-Math.PI,-a.PI_OVER_TWO,Math.PI,a.PI_OVER_TWO)),u}),define("Core/HeightmapTessellator",["./defaultValue","./defined","./freezeObject","./DeveloperError","./Cartesian3","./Ellipsoid","./Math"],function(e,t,r,n,i,o,a){"use strict";var u={};return u.DEFAULT_STRUCTURE=r({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}),u.computeVertices=function(r){if(!t(r)||!t(r.heightmap))throw new n("description.heightmap is required.");if(!t(r.width)||!t(r.height))throw new n("description.width and description.height are required.");if(!t(r.vertices))throw new n("description.vertices is required.");if(!t(r.nativeExtent))throw new n("description.nativeExtent is required.");if(!t(r.skirtHeight))throw new n("description.skirtHeight is required.");var s,h,c,f,d=Math.cos,l=Math.sin,w=Math.sqrt,p=Math.atan,m=Math.exp,y=a.PI_OVER_TWO,g=a.toRadians,x=r.vertices,v=r.heightmap,q=r.width,z=r.height,b=r.skirtHeight,M=e(r.isGeographic,!0),S=e(r.ellipsoid,o.WGS84),E=1/S.getMaximumRadius(),O=r.nativeExtent,R=r.extent;t(R)?(s=R.west,h=R.south,c=R.east,f=R.north):M?(s=g(O.west),h=g(O.south),c=g(O.east),f=g(O.north)):(s=O.west*E,h=y-2*p(m(-O.south*E)),c=O.east*E,f=y-2*p(m(-O.north*E)));var T=e(r.relativeToCenter,i.ZERO),C=e(r.structure,u.DEFAULT_STRUCTURE),_=e(C.heightScale,u.DEFAULT_STRUCTURE.heightScale),P=e(C.heightOffset,u.DEFAULT_STRUCTURE.heightOffset),I=e(C.elementsPerHeight,u.DEFAULT_STRUCTURE.elementsPerHeight),N=e(C.stride,u.DEFAULT_STRUCTURE.stride),U=e(C.elementMultiplier,u.DEFAULT_STRUCTURE.elementMultiplier),A=e(C.isBigEndian,u.DEFAULT_STRUCTURE.isBigEndian),L=(O.east-O.west)/(q-1),B=(O.north-O.south)/(z-1),W=S.getRadiiSquared(),D=W.x,V=W.y,j=W.z,H=0,F=65536,k=-65536,G=0,Z=z,Y=0,X=q;b>0&&(--G,++Z,--Y,++X);for(var J=G;Z>J;++J){var K=J;0>K&&(K=0),K>=z&&(K=z-1);var Q=O.north-B*K;Q=M?g(Q):y-2*p(m(-Q*E));for(var $=d(Q),et=l(Q),tt=j*et,rt=(Q-h)/(f-h),nt=Y;X>nt;++nt){var it=nt;0>it&&(it=0),it>=q&&(it=q-1);var ot=O.west+L*it;M?ot=g(ot):ot*=E;var at,ut=K*q*N+it*N;if(1===I)at=v[ut];else{at=0;var st;if(A)for(st=0;I>st;++st)at=at*U+v[ut+st];else for(st=I-1;st>=0;--st)at=at*U+v[ut+st]}at=at*_+P,k=Math.max(k,at),F=Math.min(F,at),(nt!==it||J!==K)&&(at-=b);var ht=$*d(ot),ct=$*l(ot),ft=D*ht,dt=V*ct,lt=w(ft*ht+dt*ct+tt*et),wt=1/lt,pt=ft*wt,mt=dt*wt,yt=tt*wt;x[H++]=pt+ht*at-T.x,x[H++]=mt+ct*at-T.y,x[H++]=yt+et*at-T.z,x[H++]=at;var gt=(ot-s)/(c-s);x[H++]=gt,x[H++]=rt}}return{maximumHeight:k,minimumHeight:F}},u}),define("Workers/createTaskProcessorWorker",["../Core/defaultValue","../Core/defined"],function(e,t){"use strict";var r=function(r){var n,i=[],o={id:void 0,result:void 0,error:void 0};return function(a){var u=a.data;i.length=0,o.id=u.id,o.error=void 0,o.result=void 0;try{o.result=r(u.parameters,i)}catch(s){o.error=s}t(n)||(n=e(self.webkitPostMessage,self.postMessage));try{n(o,i)}catch(s){o.result=void 0,o.error="postMessage failed: "+s,n(o)}}};return r}),define("Workers/createVerticesFromHeightmap",["../Core/BoundingSphere","../Core/Ellipsoid","../Core/EllipsoidalOccluder","../Core/Extent","../Core/HeightmapTessellator","./createTaskProcessorWorker"],function(e,t,r,n,i,o){"use strict";function a(o,a){var u=6,s=o.width,h=o.height;o.skirtHeight>0&&(s+=2,h+=2);var c=new Float32Array(s*h*u);a.push(c.buffer),o.ellipsoid=t.clone(o.ellipsoid),o.extent=n.clone(o.extent),o.vertices=c;var f=i.computeVertices(o),d=e.fromVertices(c,o.relativeToCenter,u),l=o.ellipsoid,w=new r(l),p=w.computeHorizonCullingPointFromVertices(o.relativeToCenter,c,u,o.relativeToCenter);return{vertices:c.buffer,numberOfAttributes:u,minimumHeight:f.minimumHeight,maximumHeight:f.maximumHeight,gridWidth:s,gridHeight:h,boundingSphere3D:d,occludeePointInScaledSpace:p}}return o(a)})}();